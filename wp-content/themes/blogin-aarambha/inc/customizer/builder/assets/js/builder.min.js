!function(r,s){var c=r(document);s.bind("ready",function(a,e){_.each(Blogin_Aarambha_Customizer_Builder.builders,function(a,e){var o,l;o=a,(a={id:l=e,controlId:"",cols:12,cellHeight:45,items:[],container:null,ready:!1,devices:{desktop:Blogin_Aarambha_Customizer_Builder.desktop_label,mobile:Blogin_Aarambha_Customizer_Builder.mobile_tablet_label},activePanel:"desktop",panels:{},activeRow:"main",draggingItem:null,getTemplate:_.memoize(function(){var t=this,n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(a,e,i){return _.isUndefined(e)&&(e="tmpl-customize-control-"+t.type),!_.isUndefined(i)&&_.isString(i)?n.variable=i:n.variable="data",_.template(r("#"+e).html(),null,n)(a)}}),drag_drop:function(){var e=this;r(".blogin-aarambha-device-panel",e.container).each(function(){var a=r(this),i=a.data("device"),t=[];e.panels[i]={},r(".col-items",a).each(function(a){var e=r(this).attr("data-id")||"",e=e?"_sid_"+i+"-"+e:"_sid_"+i+a;r(this).attr("id",e),t[a]="#"+e}),r(".col-items, .blogin-aarambha-available-items",a).each(function(){r(this).droppable().sortable({placeholder:"sortable-placeholder grid-stack-item",connectWith:".col-items",update:function(){e.save()}})})})},addPanel:function(a){var e=this.getTemplate(),i="tmpl-blogin-aarambha-panel";if(0!=r("#"+i).length)return _.isObject(o.rows)||(o.rows={}),_.isObject(o.cols)||(o.cols={}),'<div class="blogin-aarambha-device-panel blogin-aarambha-vertical-panel blogin-aarambha-panel-'+a+'" data-device="'+a+'">'+e({device:a,id:o.id,rows:o.rows,cols:o.cols},i)+"</div>"},addDevicePanels:function(){var t=this;_.each(t.devices,function(a,e){var i=t.addPanel(e);r(".blogin-aarambha-devices-switcher",t.container).append('<a href="#" class="switch-to switch-to-'+e+'" data-device="'+e+'">'+a+"</a>"),r(".blogin-aarambha-body",t.container).append(i)})},addItem:function(a){var e=this.getTemplate(),i="tmpl-blogin-aarambha-item";if(0!=r("#"+i).length)return e=e(a,i),r(e)},addAvailableItems:function(){var o=this;_.each(o.devices,function(a,t){var n=r('<div class="blogin-aarambha-available-items" data-device="'+t+'"></div>');r(".blogin-aarambha-panel-"+t,o.container).append(n),_.each(o.items,function(a){var e,i=!0;_.isUndefined(a.devices)||_.isEmpty(a.devices)||(_.isString(a.devices)?a.devices!=t&&(i=!1):(e=!1,_.each(a.devices,function(a){t==a&&(e=!0)}),e||(i=!1))),i&&(i=o.addItem(a),n.append(i))})})},switchToDevice:function(a,e){var i=this;1<_.size(i.devices)?(r(".blogin-aarambha-devices-switcher a",i.container).removeClass("blogin-aarambha-tab-active"),r(".blogin-aarambha-devices-switcher .switch-to-"+a,i.container).addClass("blogin-aarambha-tab-active"),r(".blogin-aarambha-device-panel",i.container).addClass("blogin-aarambha-panel-hide"),r(".blogin-aarambha-device-panel.blogin-aarambha-panel-"+a,i.container).removeClass("blogin-aarambha-panel-hide"),i.activePanel=a):r(".blogin-aarambha-devices-switcher a",i.container).addClass("blogin-aarambha-tab-active"),(_.isUndefined(e)||e)&&("desktop"==a?r("#customize-footer-actions .preview-desktop").trigger("click"):"mobile"==a&&r("#customize-footer-actions .preview-mobile").trigger("click"))},addNewWidget:function(a,e,i,t,n){a=this.container.find(".blogin-aarambha-device-panel.blogin-aarambha-panel-"+a),e=r(".blogin-aarambha-row.blogin-aarambha-row-"+e,a),i=r(".col-items."+i,e),e=r('.blogin-aarambha-available-items .grid-stack-item[data-id="'+t.id+'"]',a);i.append(e)},addExistingRowsItems:function(){var o=this,i=s.control(o.controlId).setting._value;_.isObject(i)||(i=i?JSON.parse(i):{}),_.each(o.panels,function(a,n){var e={};_.isObject(i[n])&&(e=i[n]),_.each(e,function(a,t){_.isUndefined(a)||_.each(a,function(a,i){_.each(a,function(a,e){o.addNewWidget(n,t,i,a,e)})})})}),o.ready=!0},focus:function(){this.container.on("click",".blogin-aarambha-item-setting, .blogin-aarambha-item-design, .blogin-aarambha-item-name, .item-tooltip",function(a){a.preventDefault();var a=r(this).data("section")||"",e=r(this).attr("data-control")||"",i=!1;e&&!_.isUndefined(s.control(e))&&(s.control(e).focus(),i=!0),i||a&&!_.isUndefined(s.section(a))&&s.section(a).focus()}),this.container.on("click",".blogin-aarambha-row-settings",function(a){a.preventDefault();a=r(this).attr("data-id")||"",a=o.id+"_"+a;_.isUndefined(s.section(a))||s.section(a).focus()})},remove:function(){var i=this;c.on("click",".blogin-aarambha-device-panel .blogin-aarambha-item-remove",function(a){a.preventDefault();var a=r(this).closest(".grid-stack-item"),e=a.closest(".blogin-aarambha-device-panel");a.removeAttr("style"),r(".blogin-aarambha-available-items",e).append(a),i.save()})},encodeValue:function(a){return encodeURI(JSON.stringify(a))},decodeValue:function(a){return JSON.parse(decodeURI(a))},save:function(){var n,i=this;i.ready&&(n={},_.each(i.devices,function(a,t){n[t]={};var e=r(".blogin-aarambha-panel-"+t,i.container);r(".blogin-aarambha-row",e).each(function(){var a=r(this),e=a.attr("data-row-id")||!1,i={};e&&(r(".col-items",a).each(function(){var a=r(this),e=a.attr("data-id")||!1;e&&(a=_.map(r(" > .grid-stack-item",a),function(a){return{id:(a=r(a)).data("id")||""}}),i[e]=a)}),n[t][e]=i)})}),s.control(i.controlId).setting.set(i.encodeValue(n)))},showPanel:function(){this.container.removeClass("blogin-aarambha-builder--hide").addClass("blogin-aarambha-builder-show"),setTimeout(function(){r("#customize-preview").addClass("cb--preview-panel-show")},100)},hidePanel:function(){this.container.removeClass("blogin-aarambha-builder-show"),d(this.container.find(".blogin-aarambha-available-items")),r("#customize-preview").removeClass("cb--preview-panel-show").removeAttr("style")},togglePanel:function(){var e=this;s.state("expandedPanel").bind(function(a){s.panel(o.panel).expanded()?(c.trigger("blogin_aarambha_panel_builder_open",[o.panel]),top._current_builder_panel=l,e.showPanel()):e.hidePanel()}),e.container.on("click",".blogin-aarambha-panel-close",function(a){a.preventDefault(),e.container.toggleClass("blogin-aarambha-builder--hide"),e.container.hasClass("blogin-aarambha-builder--hide")?r("#customize-preview").removeClass("cb--preview-panel-show"):r("#customize-preview").addClass("cb--preview-panel-show")})},panelLayoutCSS:function(){var a=r("#customize-controls").width();s.state("paneVisible").get()||(a=0),this.container.find(".blogin-aarambha-inner").css({"margin-left":a})},init:function(a,e,i){var t=this,n=t.getTemplate()(o,"tmpl-blogin-aarambha-builder-panel");t.container=r(n),r("body .wp-full-overlay").append(t.container),t.controlId=a,t.items=e,t.devices=i,o.section&&s.section(o.section).container.addClass("blogin-aarambha-hide"),t.addDevicePanels(),t.switchToDevice(t.activePanel),t.addAvailableItems(),t.switchToDevice(t.activePanel),t.drag_drop(),t.focus(),t.remove(),t.addExistingRowsItems(),s.panel(o.panel).expanded()?t.showPanel():t.hidePanel(),s.previewedDevice.bind(function(a){"desktop"===a?t.switchToDevice("desktop",!1):t.switchToDevice("mobile",!1)}),t.togglePanel(),s.state("paneVisible").get()&&t.panelLayoutCSS(),s.state("paneVisible").bind(function(){t.panelLayoutCSS()}),r(window).resize(_.throttle(function(){t.panelLayoutCSS()},100)),t.container.on("click",".blogin-aarambha-devices-switcher a.switch-to",function(a){a.preventDefault();a=r(this).data("device");t.switchToDevice(a),r(".blogin-aarambha-body").find(".blogin-aarambha-available-items").each(function(){d(r(this))})}),c.trigger("blogin_aarambha_builder_panel_loaded",[l,t])}}).init(o.control_id,o.items,o.devices)}),s.bind("pane-contents-reflowed",function(){setTimeout(function(){r("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice .footer_moved_widgets_text").length||r("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice").append('<p class="footer_moved_widgets_text">'+Blogin_Aarambha_Customizer_Builder.footer_moved_widgets_text+"</p>")},1e3)}),s.state("expandedSection").bind(function(a){r(".blogin-aarambha-device-panel .grid-stack-item").removeClass("item-active"),r(".blogin-aarambha-row").removeClass("row-active"),a&&(r('.blogin-aarambha-row[data-id="'+a.id+'"]').addClass("row-active"),r(".blogin-aarambha-device-panel .grid-stack-item.for-s-"+a.id).addClass("item-active"))})}),c.on("click",".focus-section",function(a){a.preventDefault();a=r(this).attr("data-id")||"";(a=a||(a=r(this).attr("href")||"").replace("#",""))&&s.section(a)&&s.section(a).focus()}),c.on("click",".focus-control",function(a){a.preventDefault();a=r(this).attr("data-id")||"";(a=a||(a=r(this).attr("href")||"").replace("#",""))&&s.control(a)&&s.control(a).focus()}),c.on("click",".focus-panel",function(a){a.preventDefault();a=r(this).attr("data-id")||"";(a=a||(a=r(this).attr("href")||"").replace("#",""))&&s.panel(a)&&s.panel(a).focus()});function d(a){var e=a.prev(".blogin-aarambha-add-new-item");e.length||(e=e.prev(".blogin-aarambha-sidebar").find(".blogin-aarambha-add-new-item")),a.length&&(a.removeClass("blogin-aarambha-show-items"),r("body").removeClass("blogin-aarambha-body-overlay"),e.removeClass("blogin-aarambha-hide-items"))}c.on("mouseover",".blogin-aarambha-row .grid-stack-item",function(a){a.preventDefault();var a=r(this),e=r(".blogin-aarambha-item-remove",a).outerWidth()+r(".blogin-aarambha-item-setting",a).outerWidth();r(".grid-stack-item-content",a).innerWidth()-50<e&&a.addClass("show-tooltip")}),c.on("mouseleave",".blogin-aarambha-row .grid-stack-item",function(a){a.preventDefault(),r(this).removeClass("show-tooltip")}),c.on("click",".blogin-aarambha-add-new-item",function(a){a.preventDefault();var a=r(this),e=a.next(".blogin-aarambha-available-items");(e=e.length?e:a.closest(".blogin-aarambha-sidebar").next(".blogin-aarambha-available-items")).length&&(e.toggleClass("blogin-aarambha-show-items"),r("body").toggleClass("blogin-aarambha-body-overlay"),a.toggleClass("blogin-aarambha-hide-items"))}),c.on("click",".blogin-aarambha-close-item-panel",function(a){a.preventDefault(),d(r(this).closest(".blogin-aarambha-available-items"))})}(jQuery,wp.customize||null);